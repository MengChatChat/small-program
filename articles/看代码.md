1. v-search 写法
2. block wx:for 中加组件
3. v-loading 动画



## 3.book-detail 页面

v-tag 短评组件


### Q: loading

```
wx.showLoading()
wx.hideLoading()

```

### Q: wx 计算属性 or 过滤器？

过滤器吧，应该是

```
<wxs src="../../util/filter.wxs" module="util" />

<block wx:for="{{util.limit(comments, 10)}}" wx:key="content">
               
```

### Q: promist.all 用法？
```
	const detail = bookModel.getDetail(bid)
    const comments = bookModel.getComments(bid)
    const likeStatus = bookModel.getLikeStatus(bid)


    Promise.all([detail, comments, likeStatus])
      .then(res => {
         wx.hideLoading()
      })
```

## 2. book.wxml 页面

### Q:book 页面，循环列出图片

如何换行？两个一行，多了换行？样式怎么写

图d-1


```
<block wx:key="id" wx:for="{{books}}">
    <v-book book="{{item}}" />
</block>


.books-container {
    margin-top: 10rpx;
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: space-between;
    padding: 0 90rpx;
}
```






## 1. classic.wxml 页面

### Q: 分享按钮，获取信息？

```
//slot 的使用
<v-button class="share-btn" open-type="share">
    <image class="share" slot="img" src="/images/icon/share.png" />
</v-button>

//用户点击该按钮时，会返回获取到的用户信息，回调的detail数据与wx.getUserInfo返回的一致，open-type="getUserInfo"时有效

// button 的属性
open-type="share"

//open-type 的合法值
share	触发用户转发，使用前建议先阅读使用指引

bindgetuserinfo  
用户点击该按钮时，会返回获取到的用户信息，回调的detail数据与wx.getUserInfo返回的一致，
open-type="getUserInfo"时有效
```

### Q: behavior使用

```
import { classicBeh } from '../classic-beh.js'
behaviors: [classicBeh],
```

### Q: slot 的使用

```
<v-button class="share-btn" open-type="share">
    <image class="share" slot="img" src="/images/icon/share.png" />
</v-button>

// 通过name
<button bind:getuserinfo="onGetUserInfo" 
    open-type='{{openType}}'  plain='{{true}}'
     class="container">
  <slot name="img"></slot>
</button>
```

### Q: 父组件怎么向子组件传值的？
```
<v-episode class="episode" index="{{classic.index}}" />

传了个 index 方在 properties 中了


properties: {
    index:{
      type:String,
      observer:function(newVal, oldVal, changedPath){
        let val = newVal < 10?'0'+newVal:newVal
        this.setData({
          _index:val
        })
      }
    }
  },
```


### Q:attached?
组件的生命周期，指的是组件自身的一些函数，这些函数在特殊的时间点或遇到一些特殊的框架事件时被自动触发。

其中，最重要的生命周期是 created attached detached ，包含一个组件实例生命流程的最主要时间点。

组件实例刚刚被创建好时， created 生命周期被触发。此时，组件数据 this.data 就是在 Component 构造器中定义的数据 data 。 此时还不能调用 setData 。 通常情况下，这个生命周期只应该用于给组件 this 添加一些自定义属性字段。

在组件完全初始化完毕、进入页面节点树后， attached 生命周期被触发。此时， this.data 已被初始化为组件的当前值。这个生命周期很有用，绝大多数初始化工作可以在这个时机进行。

在组件离开页面节点树后， detached 生命周期被触发。退出一个页面时，如果组件还在页面节点树中，则 detached 会被触发。



### Q:子组件向父组件传值

```
this.triggerEvent('like',{
    behavior:behavior
  },{})
  
<v-like class="like" bind:like="onLike" like="{{likeStatus}}" count="{{likeCount}}" />

onLike: function (event) {
  const behavior = event.detail.behavior
  likeModel.like(behavior, this.data.classic.id,
    this.data.classic.type)
}
```







